---
description: Promote patterns from child projects to AssemblyZero
argument-hint: "[--help] [--command NAME] [--tool NAME] [--template DIR] [--permission PATTERN] [--from PROJECT]"
---

# Promote to AssemblyZero

**If `$ARGUMENTS` contains `--help`:** Display the Help section below and STOP.

---

## Help

Usage: `/promote [--help] [--command NAME] [--tool NAME] [--template DIR] [--permission PATTERN] [--from PROJECT]`

| Argument | Description |
|----------|-------------|
| `--help` | Show this help message and exit |
| `--command NAME` | Promote a command (.claude/commands/NAME.md) |
| `--tool NAME` | Promote a tool (.claude/tools/NAME) |
| `--template DIR` | Promote a template directory (.claude/DIR/) |
| `--permission PATTERN` | Add permission pattern to AssemblyZero settings |
| `--from PROJECT` | Source project (default: auto-detect from cwd) |
| (no args) | Interactive mode - show harvest high-priority candidates |

**Examples:**
- `/promote --command audit --from Aletheia` - Promote audit command
- `/promote --tool gemini-model-check.sh --from Talos` - Promote tool
- `/promote --template gemini-prompts --from Talos` - Promote template directory
- `/promote --permission "Bash(gemini:*)"` - Add permission to AssemblyZero
- `/promote` - Interactive mode (shows candidates from latest harvest)

---

## Execution

### Mode Detection

Parse `$ARGUMENTS`:
- If `--command`, `--tool`, `--template`, or `--permission`: Direct promotion mode
- If no specific flags: Interactive mode

### Interactive Mode (No Args)

1. Read harvest results from `C:\Users\mcwiz\Projects\AssemblyZero\harvest-results.json`
2. Display HIGH priority candidates
3. Ask user which to promote
4. Execute promotion for selected items

### Direct Promotion Mode

#### For Commands (`--command NAME`)

1. **Source:** `{PROJECT}/.claude/commands/{NAME}.md`
2. **Destination:** `C:\Users\mcwiz\Projects\AssemblyZero\.claude\commands\{NAME}.md`
3. **Generalization Required:**
   - Replace project-specific paths with `{{PROJECT_ROOT}}`
   - Replace project name with `{{PROJECT_NAME}}`
   - Replace repo with `{{GITHUB_REPO}}`
   - Remove project-specific audit numbers (e.g., `0809` â†’ generic framework)
   - Keep workflow structure, remove project-specific sections
4. **Verification:** Read destination, confirm changes look generic

#### For Tools (`--tool NAME`)

1. **Source:** `{PROJECT}/.claude/tools/{NAME}`
2. **Destination:** `C:\Users\mcwiz\Projects\AssemblyZero\.claude\tools\{NAME}`
3. **Generalization Required:**
   - Replace project-specific paths with variables
   - Update comment header: "Generated by AssemblyZero for {{PROJECT_NAME}}"
   - Keep core functionality, parameterize project-specific parts
4. **Verification:** Tool should work across projects

#### For Templates (`--template DIR`)

1. **Source:** `{PROJECT}/.claude/{DIR}/`
2. **Destination:** `C:\Users\mcwiz\Projects\AssemblyZero\.claude\templates\{DIR}/`
3. **Generalization Required:**
   - Replace project names in templates with `{{PROJECT_NAME}}`
   - Keep structure, add `{{VAR}}` placeholders where needed
4. **Verification:** Templates should be project-agnostic

#### For Permissions (`--permission PATTERN`)

1. **Target:** `C:\Users\mcwiz\Projects\AssemblyZero\.claude\settings.local.json`
2. **Action:** Add pattern to `permissions.allow` array
3. **Deduplication:** Skip if already present
4. **Verification:** Pattern appears in allow list

---

## Post-Promotion Actions

After any promotion:

1. **Run harvest** to verify the pattern no longer appears as a candidate:
   ```bash
   poetry run --directory /c/Users/mcwiz/Projects/AssemblyZero python /c/Users/mcwiz/Projects/AssemblyZero/tools/assemblyzero-harvest.py --format json
   ```

2. **Update project registry notes** if needed

3. **Report results** to user

---

## Project Registry

The registry at `.claude/project-registry.json` lists all child projects:

```json
{
  "children": [
    {"name": "Aletheia", "path": "C:\\Users\\mcwiz\\Projects\\Aletheia", "status": "active"},
    {"name": "Talos", "path": "C:\\Users\\mcwiz\\Projects\\Talos", "status": "active"},
    {"name": "maintenance", "path": "C:\\Users\\mcwiz\\Projects\\maintenance", "status": "active"}
  ]
}
```

Use `--from PROJECT` to specify source, or auto-detect from current working directory.

---

## Related

- **ADR 0206:** Bidirectional Sync Architecture
- **Audit 0832:** Cross-Project Harvest
- **Tool:** `assemblyzero-harvest.py` - Discover promotion candidates
