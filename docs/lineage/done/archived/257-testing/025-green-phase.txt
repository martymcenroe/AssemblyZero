============================= test session starts =============================
platform win32 -- Python 3.14.0, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\mcwiz\AppData\Local\pypoetry\Cache\virtualenvs\agentos-tools-avX7uQzj-py3.14\Scripts\python.exe
cachedir: .pytest_cache
benchmark: 5.2.3 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: C:\Users\mcwiz\Projects\AgentOS-257
configfile: pyproject.toml
plugins: anyio-4.12.1, langsmith-0.6.4, asyncio-1.3.0, benchmark-5.2.3, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 49 items

tests/test_issue_257.py::test_id PASSED                                  [  2%]
tests/test_issue_257.py::test_t010 PASSED                                [  4%]
tests/test_issue_257.py::test_t020 PASSED                                [  6%]
tests/test_issue_257.py::test_t030 PASSED                                [  8%]
tests/test_issue_257.py::test_t040 PASSED                                [ 10%]
tests/test_issue_257.py::test_t050 PASSED                                [ 12%]
tests/test_issue_257.py::test_t060 PASSED                                [ 14%]
tests/test_issue_257.py::test_t090 PASSED                                [ 16%]
tests/test_issue_257.py::test_010 PASSED                                 [ 18%]
tests/test_issue_257.py::test_020 PASSED                                 [ 20%]
tests/test_issue_257.py::test_030 PASSED                                 [ 22%]
tests/test_issue_257.py::test_040 PASSED                                 [ 24%]
tests/test_issue_257.py::test_050 PASSED                                 [ 26%]
tests/test_issue_257.py::test_060 PASSED                                 [ 28%]
tests/test_issue_257.py::test_090 PASSED                                 [ 30%]
tests/test_issue_257.py::test_100 PASSED                                 [ 32%]
tests/test_issue_257.py::test_110 PASSED                                 [ 34%]
tests/test_issue_257.py::test_discuss_verdict PASSED                     [ 36%]
tests/test_issue_257.py::test_explicit_approved_verdict PASSED           [ 38%]
tests/test_issue_257.py::test_qa_format_resolutions PASSED               [ 40%]
tests/test_issue_257.py::test_numbered_resolutions PASSED                [ 42%]
tests/test_issue_257.py::test_suggestion_markers PASSED                  [ 44%]
tests/test_issue_257.py::test_update_numbered_questions PASSED           [ 46%]
tests/test_issue_257.py::test_idempotent_already_resolved PASSED         [ 48%]
tests/test_issue_257.py::test_inline_resolution_format PASSED            [ 51%]
tests/test_issue_257.py::test_simple_approved_keyword PASSED             [ 53%]
tests/test_issue_257.py::test_empty_verdict PASSED                       [ 55%]
tests/test_issue_257.py::test_empty_draft PASSED                         [ 57%]
tests/test_issue_257.py::test_flexible_question_matching PASSED          [ 59%]
tests/test_issue_257.py::test_existing_suggestions_section PASSED        [ 61%]
tests/test_issue_257.py::test_suggestion_with_category PASSED            [ 63%]
tests/test_issue_257.py::test_append_suggestions_at_end PASSED           [ 65%]
tests/test_issue_257.py::test_rejected_checkbox PASSED                   [ 67%]
tests/test_issue_257.py::test_verdict_blocked_keyword PASSED             [ 69%]
tests/test_issue_257.py::test_verdict_rejected_keyword PASSED            [ 71%]
tests/test_issue_257.py::test_simple_arrow_resolution_format PASSED      [ 73%]
tests/test_issue_257.py::test_resolution_without_open_questions_section PASSED [ 75%]
tests/test_issue_257.py::test_exact_match_resolution PASSED              [ 77%]
tests/test_issue_257.py::test_flexible_match_already_resolved PASSED     [ 79%]
tests/test_issue_257.py::test_long_question_text_warning PASSED          [ 81%]
tests/test_issue_257.py::test_keyword_match_resolution PASSED            [ 83%]
tests/test_issue_257.py::test_exact_match_already_resolved PASSED        [ 85%]
tests/test_issue_257.py::test_pattern2_flexible_match PASSED             [ 87%]
tests/test_issue_257.py::test_append_new_suggestion_to_existing PASSED   [ 89%]
tests/test_issue_257.py::test_duplicate_suggestion_not_added PASSED      [ 91%]
tests/test_issue_257.py::test_070 PASSED                                 [ 93%]
tests/test_issue_257.py::test_080 PASSED                                 [ 95%]
tests/test_issue_257.py::test_t070 PASSED                                [ 97%]
tests/test_issue_257.py::test_t080 PASSED                                [100%]
ERROR: Coverage failure: total of 10 is less than fail-under=95


============================== warnings summary ===============================
..\..\AppData\Local\pypoetry\Cache\virtualenvs\agentos-tools-avX7uQzj-py3.14\Lib\site-packages\langchain_core\_api\deprecation.py:27
  C:\Users\mcwiz\AppData\Local\pypoetry\Cache\virtualenvs\agentos-tools-avX7uQzj-py3.14\Lib\site-packages\langchain_core\_api\deprecation.py:27: UserWarning: Core Pydantic V1 functionality isn't compatible with Python 3.14 or greater.
    from pydantic.v1.fields import FieldInfo as FieldInfoV1

..\..\AppData\Local\pypoetry\Cache\virtualenvs\agentos-tools-avX7uQzj-py3.14\Lib\site-packages\pydantic\v1\typing.py:77
..\..\AppData\Local\pypoetry\Cache\virtualenvs\agentos-tools-avX7uQzj-py3.14\Lib\site-packages\pydantic\v1\typing.py:77
..\..\AppData\Local\pypoetry\Cache\virtualenvs\agentos-tools-avX7uQzj-py3.14\Lib\site-packages\pydantic\v1\typing.py:77
..\..\AppData\Local\pypoetry\Cache\virtualenvs\agentos-tools-avX7uQzj-py3.14\Lib\site-packages\pydantic\v1\typing.py:77
..\..\AppData\Local\pypoetry\Cache\virtualenvs\agentos-tools-avX7uQzj-py3.14\Lib\site-packages\pydantic\v1\typing.py:77
..\..\AppData\Local\pypoetry\Cache\virtualenvs\agentos-tools-avX7uQzj-py3.14\Lib\site-packages\pydantic\v1\typing.py:77
..\..\AppData\Local\pypoetry\Cache\virtualenvs\agentos-tools-avX7uQzj-py3.14\Lib\site-packages\pydantic\v1\typing.py:77
  C:\Users\mcwiz\AppData\Local\pypoetry\Cache\virtualenvs\agentos-tools-avX7uQzj-py3.14\Lib\site-packages\pydantic\v1\typing.py:77: DeprecationWarning: ForwardRef._evaluate is a private API and is retained for compatibility, but will be removed in Python 3.16. Use ForwardRef.evaluate() or typing.evaluate_forward_ref() instead.
    return cast(Any, type_)._evaluate(globalns, localns, type_params=(), recursive_guard=set())

..\..\AppData\Local\pypoetry\Cache\virtualenvs\agentos-tools-avX7uQzj-py3.14\Lib\site-packages\google\genai\types.py:43
  C:\Users\mcwiz\AppData\Local\pypoetry\Cache\virtualenvs\agentos-tools-avX7uQzj-py3.14\Lib\site-packages\google\genai\types.py:43: DeprecationWarning: '_UnionGenericAlias' is deprecated and slated for removal in Python 3.17
    VersionedUnionType = Union[builtin_types.UnionType, _UnionGenericAlias]

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.14.0-final-0 _______________

Name                                                         Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------
agentos\__init__.py                                              1      0   100%
agentos\core\__init__.py                                         5      0   100%
agentos\core\audit.py                                          102     82    20%   80-106, 117-136, 144-145, 157-165, 182-208, 222-242, 253-272, 281-282, 290, 328
agentos\core\claude_client.py                                   36     36     0%   11-123
agentos\core\config.py                                          16      0   100%
agentos\core\gemini_client.py                                  281    226    20%   114-116, 120-122, 173-192, 208-251, 283-299, 303-313, 335-391, 420-638, 662-703, 707-725, 729-731, 743-757, 763-766, 770-787, 791, 795-803
agentos\core\llm_provider.py                                   147     98    33%   63, 69, 88, 121-128, 132, 136, 147-171, 192-280, 327-334, 338, 342, 346-350, 368-389, 430-437, 441, 445, 463-481, 505-515, 535-544
agentos\core\state.py                                            4      0   100%
agentos\graphs\__init__.py                                       0      0   100%
agentos\nodes\__init__.py                                        3      3     0%   3-6
agentos\nodes\designer.py                                      134    134     0%   15-501
agentos\nodes\lld_reviewer.py                                   90     90     0%   7-335
agentos\utils\__init__.py                                        2      2     0%   3-14
agentos\utils\lld_verification.py                               98     98     0%   14-361
agentos\workflow\__init__.py                                     2      2     0%   6-8
agentos\workflow\checkpoint.py                                  27     27     0%   7-77
agentos\workflows\__init__.py                                    0      0   100%
agentos\workflows\issue\__init__.py                              3      3     0%   10-13
agentos\workflows\issue\audit.py                               138    138     0%   12-474
agentos\workflows\issue\graph.py                                59     59     0%   11-249
agentos\workflows\issue\nodes\__init__.py                        8      8     0%   15-23
agentos\workflows\issue\nodes\draft.py                          94     94     0%   10-294
agentos\workflows\issue\nodes\file_issue.py                    185    185     0%   9-472
agentos\workflows\issue\nodes\human_edit_draft.py              131    131     0%   9-252
agentos\workflows\issue\nodes\human_edit_verdict.py            140    140     0%   10-278
agentos\workflows\issue\nodes\load_brief.py                     49     49     0%   9-184
agentos\workflows\issue\nodes\review.py                         77     77     0%   9-193
agentos\workflows\issue\nodes\sandbox.py                        30     30     0%   11-104
agentos\workflows\issue\state.py                                18     18     0%   9-40
agentos\workflows\parallel\__init__.py                           5      5     0%   3-8
agentos\workflows\parallel\coordinator.py                       85     85     0%   3-184
agentos\workflows\parallel\credential_coordinator.py            59     59     0%   3-127
agentos\workflows\parallel\input_sanitizer.py                   13     13     0%   3-39
agentos\workflows\parallel\output_prefixer.py                   19     19     0%   3-45
agentos\workflows\requirements\__init__.py                       4      0   100%
agentos\workflows\requirements\audit.py                        175    142    19%   60-65, 85-88, 113-121, 140-151, 171-174, 201-209, 230-238, 258-276, 292-321, 357-371, 385-394, 415-445, 470-475, 496-503, 534-537, 560-595, 627-682
agentos\workflows\requirements\config.py                        68     22    68%   52, 56, 63-70, 109, 116, 126-148, 156
agentos\workflows\requirements\git_operations.py                30     23    23%   27-30, 55-101
agentos\workflows\requirements\graph.py                         77     60    22%   78-80, 102-108, 127-134, 157-194, 213-220, 236, 260-334
agentos\workflows\requirements\nodes\__init__.py                 6      0   100%
agentos\workflows\requirements\nodes\finalize.py               156    140    10%   40-58, 70-116, 132-157, 182-204, 219-307, 318-344, 359-377
agentos\workflows\requirements\nodes\generate_draft.py          90     81    10%   45-140, 166-232, 254-274
agentos\workflows\requirements\nodes\human_gate.py              88     81     8%   26-40, 52-67, 84-138, 159-233
agentos\workflows\requirements\nodes\load_input.py             114     96    16%   61-66, 78-111, 129-221, 240-272, 291-307, 320-321
agentos\workflows\requirements\nodes\review.py                 117     96    18%   44-141, 179-184, 196-214, 237-250, 262-276, 289-300, 316-332
agentos\workflows\requirements\parsers\__init__.py               3      0   100%
agentos\workflows\requirements\parsers\draft_updater.py        130      7    95%   144, 156, 187, 214, 219, 223, 244
agentos\workflows\requirements\parsers\verdict_parser.py        94      0   100%
agentos\workflows\requirements\state.py                         43     24    44%   241-308, 320-341
agentos\workflows\scout\__init__.py                              3      3     0%   7-18
agentos\workflows\scout\budget.py                               21     21     0%   7-76
agentos\workflows\scout\graph.py                                 5      5     0%   6-62
agentos\workflows\scout\instrumentation.py                      40     40     0%   6-126
agentos\workflows\scout\nodes.py                               151    151     0%   6-342
agentos\workflows\scout\prompts.py                              11     11     0%   7-76
agentos\workflows\scout\security.py                             44     44     0%   6-132
agentos\workflows\scout\templates.py                            33     33     0%   6-124
agentos\workflows\testing\__init__.py                            3      3     0%   18-21
agentos\workflows\testing\audit.py                              82     82     0%   13-307
agentos\workflows\testing\graph.py                              98     98     0%   41-363
agentos\workflows\testing\knowledge\__init__.py                  2      2     0%   8-10
agentos\workflows\testing\knowledge\patterns.py                 60     60     0%   7-193
agentos\workflows\testing\nodes\__init__.py                     10     10     0%   19-34
agentos\workflows\testing\nodes\document.py                    140    140     0%   13-360
agentos\workflows\testing\nodes\e2e_validation.py               93     93     0%   9-311
agentos\workflows\testing\nodes\finalize.py                    103    103     0%   10-249
agentos\workflows\testing\nodes\implement_code.py              247    247     0%   7-693
agentos\workflows\testing\nodes\load_lld.py                    204    204     0%   10-602
agentos\workflows\testing\nodes\review_test_plan.py            139    139     0%   9-496
agentos\workflows\testing\nodes\scaffold_tests.py              185    185     0%   9-442
agentos\workflows\testing\nodes\validate_commit_message.py      12     12     0%   7-47
agentos\workflows\testing\nodes\verify_phases.py               160    160     0%   7-497
agentos\workflows\testing\state.py                               9      9     0%   12-36
agentos\workflows\testing\templates\__init__.py                  5      5     0%   12-23
agentos\workflows\testing\templates\cp_docs.py                  73     73     0%   9-296
agentos\workflows\testing\templates\lessons.py                 115    115     0%   8-304
agentos\workflows\testing\templates\runbook.py                  94     94     0%   8-259
agentos\workflows\testing\templates\wiki_page.py                74     74     0%   8-207
------------------------------------------------------------------------------------------
TOTAL                                                         5472   4899    10%
FAIL Required test coverage of 95% not reached. Total coverage: 10.47%
======================= 49 passed, 9 warnings in 1.84s ========================

